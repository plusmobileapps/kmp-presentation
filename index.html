<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Kotlin Multiplatform</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/moon.css" id="theme">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
</head>

<body>
	<div class="reveal">
		<div class="slides">

			<section>
				<img src="images/kotlin.png" width="600" />
				<h3>Kotlin Multiplatform (KMP)</h3>
				<h4>The sane approach to sharing code</h4>
			</section>

			<section>
				<section>
					<h3>Me in 2013</h3>
					<img src="images/android-dev.png" />

					<aside class="notes">
						What phone did you have?
						What did you learn?
					</aside>
				</section>
				<section>
					<h5>Job for a consumer App</h5>
					<img src="images/multiplatform.jpg" width="300" />

					<p class="fragment fade-up">Written in different languages</p>
					<p class="fragment fade-up">Different architectures</p>
					<p class="fragment fade-up">3 separate teams</p>
					<p class="fragment fade-up">Each with their own set of bugs</p>

					<aside class="notes">
						<li>What language does each platform use? </li>
						<li>Bugs?</li>
					</aside>
				</section>
				<section>
					<img src="images/better-way.gif" />
					<p class="fragment fade-up">So what ways are there?</p>
				</section>

				<section>
					<h4>React Native</h4>
					<img src="images/react-native.jpeg" width="400" />
					<p class="fragment fade-up">Written in Javascript/Typescript</p>
					<p class="fragment fade-up">Share business logic</p>
					<p class="fragment fade-up">Write native and web components separately</p>
					<p class="fragment fade-up">Kotlin/Swift developers are not fans of Javascript‚ùå</p>


					<aside class="notes">
						<li>Great if you started off as a web team</li>
						<li>What happens if you have native teams in place?</li>
					</aside>
				</section>

				<section>
					<h4>Flutter</h4>
					<img src="images/flutter.png" width="400" />
					<p class="fragment fade-up">Written in Dart</p>
					<p class="fragment fade-up">Same components for every platform</p>
					<p class="fragment fade-up">Best for green field projects</p>
					<p class="fragment fade-up">Different language than every platformüôÉ</p>

					<aside class="notes">
						<li>What is dart like?</li>
						<li>designers dream & don't need to rewrite view components more than once</li>
						<li>Great for a team of 1 - wolf pack</li>
					</aside>
				</section>

				<section>
					<h4>Kotlin Multiplatform</h4>
					<img src="images/kmp.jpg" width="400" />
					<p class="fragment fade-up">Business logic in Kotlin compiles to each platform</p>
					<p class="fragment fade-up">Interop with common code from native</p>
					<p class="fragment fade-up">Kotlin helps increase productivity and increase developer satisfactionü•∞
					</p>
				</section>
			</section>

			<section data-markdown>
				<textarea data-template>
				  ## Agenda
				  * KMP Architecture
				  * How to build a repository
					* Networking
					* Caching
				  * Testing
				  * How far you can take KMP
				</textarea>
			</section>

			<section>
				<section data-auto-animate>
					<h3>Typical Architecture</h3>
					<img src="images/kmp-arch-view.png">
				</section>
				<section data-auto-animate>
					<h3>Typical Architecture</h3>
					<img src="images/kmp-arch-presenter.png">
				</section>
				<section data-auto-animate>
					<h3>Typical Architecture</h3>
					<img src="images/kmp-arch-model.png">
				</section>
				<section data-auto-animate>
					<h3>KMP Architecture</h3>
					<img src="images/kmp-arch-shared.png">
				</section>
				<section data-auto-animate>
					<h3>KMP Architecture</h3>
					<img src="images/kmp-repository.png">
				</section>
			</section>


			<section>
				<h3>Caching</h3>
				<section>
					<h4 class="fragment fade-up">SQL Delight</h4>	
					<p class="fragment fade-up">Generates typesafe kotlin APIs from your SQL statements</p>
					<p class="fragment fade-up">Mainly useful for Android & iOS</p>
					<p class="fragment fade-up">Also supports JS, JVM, macOS, & Windows</p>
				</section>

				<section data-markdown="slides/sql-delight-gradle.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>

				<section data-markdown="slides/sql-delight-file.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>

				<section data-markdown="slides/sql-delight-driver.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
					data-separator-notes="^Note:" data-charset="iso-8859-15"></section>

				<section>
					<h4>Demo</h4>
					<img src="images/sqldelight-demo.gif"/>
				</section>
			</section>

			<section>
				<h3>Networking</h3>
				<section>
					<h4 class="fragment fade-up">Ktor</h4>	
					<p class="fragment fade-up">Multiplatform HTTP client</p>
					<p class="fragment fade-up">Uses Kotlin coroutines</p>
					<p class="fragment fade-up">Supports iOS, Android, JS, JVM, Desktop</p>
					<p class="fragment fade-up">Can also be used for asynchronous microservice backends or web apps!</p>
				</section>

				<section>
					<h4 class="fragment fade-up">Kotlinx Serialization</h4>	
					<p class="fragment fade-up">Multiplatform JSON serialization</p>
					<p class="fragment fade-up">Supports Kotlin classes marked as @Serializable and standard collections</p>
					<p class="fragment fade-up">Serialize/Deserialize network requests/responses</p>
					<p class="fragment fade-up">Complete multiplatform support: JVM, JS and Native</p>
				</section>

				<section data-markdown="slides/ktor-gradle.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>

				<section data-markdown="slides/ktor-client.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>
			</section>

			<section>
				<h3>Putting it all together</h3>
				<section data-markdown="slides/repository.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>

				<section data-markdown="slides/di.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>

				<section data-markdown="slides/android.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>

				<section data-markdown="slides/ios.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>
			</section>

			<section>
				<h3>Testing</h3>
				<section>
					<p class="fragment fade-up">Tests in common are ran on each compiled platform</p>
					<p class="fragment fade-up">Most ideal for assertions</p>
					<p class="fragment fade-up">No mocking library support for every platform, but you can create mocks manually</p>
					<p class="fragment fade-up">UI automation is done by each native platform team</p>
				</section>

				<section data-markdown="slides/testing.md" data-separator="^\n\n\n" data-separator-vertical="^\n\n"
				data-separator-notes="^Note:" data-charset="iso-8859-15"></section>
			</section>

			<section>
				<h3>How far can you take kmp?</h3>

				<section> 
					<p class="fragment fade-up">MVI Kotlin - consolidate presentation logic </p>
					<img class="fragment fade-up" src="images/mvi.jpg" width="400"></img>
					<p class="fragment fade-up">Powerful time traveling debugging feature</p>
					<p class="fragment fade-up">Does not depend on any specific reactive framework</p>
				</section>

				<section> 
					<p class="fragment fade-up">Decompose - BLOC pattern</p>
					<p class="fragment fade-up">Has routing feature for pluggable UIs - Jetpack Compose, SwiftUI, React</p>
					<p class="fragment fade-up">State Keepers to maintain state across configurations</p>
				</section>

			</section>

			<section>
				<h2>The end</h2>

				<h4>Questions?</h4>
				<a href="http://plusmobileapps.com/kmp-presentation/">http://plusmobileapps.com/kmp-presentation/</a>
			</section>
			
		</div>
	</div>

	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
	</script>
</body>

</html>